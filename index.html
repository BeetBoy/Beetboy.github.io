<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>First Expression</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Odibee+Sans&display=swap" rel="stylesheet">
  </head>

  <body>
    <div class="center">
    <img src="C:\Beetboy.github.io\images\1.png" alt="start here" class="center"></div>
    <p>Create your avatar</p>
    <div class="center">
      <img src="...\images\2.png" alt="Create Avatar" class="center"></div>
    <ul><li>First Expression Studio lets you create your own custom avatar, and then share it with the world.<br> 
        You can download your avatar and keep it forever, or post it on social media and earn badges and rewards for creating and sharing.</li></ul>
    <p>Customize your avatar</p>
    <div class="center">
    <img src="C:\BeetBoy.github.io\images\3.png" alt="Customize Avatar" class="center"></div>
    <ul><li>Choose the hair color, eye color, skin tone, clothes, accessories, etc. to make your own unique avatar. <br>
        With so many options to choose from, you'll be able to create a truly one-of-a-kind avatar that's perfect for you!</li></ul>
    <p>Share your avatar on social media</p>
    <div class="center">
    <img src="C:\BeetBoy.github.io\images\4.png" alt="Share Avatar" class="center"></div>
    <ul><li>Post your avatar on social media to show off to friends and family or use it as your profile pic! <br>
   </li></ul>
  <p class="warning">
      Once you finish creating your avatar, download it as a .PNG file, Join the First Expression community on Discord, and follow the steps to earn rewards!
      <a href="https://discord.gg/cynK6c4FEC">Join!</a>
    </p>

  <div><iframe  id="frame" class="frame" allow="camera *; microphone *"></iframe></div>
  </body>

    <script>
      const subdomain = 'firstexpression'; //  custom subdomain
      const frame = document.getElementById('frame');

      frame.src = `https://${subdomain}.readyplayer.me/avatar?frameApi`;

      window.addEventListener('message', subscribe);
      document.addEventListener('message', subscribe);

      function subscribe(event) {
        const json = parse(event);

        if (json?.source !== 'readyplayerme') {
          return;
        }

        // Susbribe to all events sent from Ready Player Me once frame is ready
        if (json.eventName === 'v1.frame.ready') {
          frame.contentWindow.postMessage(
            JSON.stringify({
              target: 'readyplayerme',
              type: 'subscribe',
              eventName: 'v1.**'
            }),
            '*'
          );
        }

        // Get avatar GLB URL
        if (json.eventName === 'v1.avatar.exported') {
          console.log(`Avatar URL: ${json.data.url}`);
          document.getElementById('avatarUrl').innerHTML = `Avatar URL: ${json.data.url}`;
          document.getElementById('frame').hidden = true;
        }

        // Get user id
        if (json.eventName === 'v1.user.set') {
          console.log(`User with id ${json.data.id} set: ${JSON.stringify(json)}`);
        }
      }

      function parse(event) {
        try {
          return JSON.parse(event.data);
        } catch (error) {
          return null;
        }
      }

      function displayIframe() {
        document.getElementById('frame').hidden = false;
      }
</script>
</html>
